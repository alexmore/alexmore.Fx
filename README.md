# alexmore.Fx
Реализация базовых классов CQRS для обеспечения отказа от Repository и XxxService (XxxController) на .NET Core.

#### Когда?
  
 - Если Repository начал превращаться в монстра с кучей GetXXX, FindXXX, GetXXX и уж тем более если его реализация разделена 
по partial классам;
 - Если в XxxService конструктор принимает все больше и больше Repository;
 - Если код для обеспечения тестов XxxService в несколько раз больше самих тестов.
 
#### Почему?
  
 - Разделение бизнесс-логики на атомарные действия: одна команда одно - правило;
 - Использование команд как Unit of Work для rich domain model;
 - Устранение зависимости от способа реализации запросов и команд: может использоваться Linq, чистый SQL, а может и вообще не SQL;
 - Слабая связность: реализация команд и запросов может быть заменена в любое время без затрагивания других частей системы. Изменения только в IoC.
 - Отличная тестируемость.
  
#### А конкретнее?
  
 - Вот так вот мог бы выглядеть [простейший контроллер WebApi](source/alexmore.Fx.Tests/Domain/WebApiControllerSample.cs);
 - Пример [команд](source/alexmore.Fx.Tests/Domain/Commands);
 - Пример [запросов](source/alexmore.Fx.Tests/Domain/Queries);
 - А вот [настройка IoC (StructureMap)](source/alexmore.Fx.Tests/Domain/Infrastructure/DefaultRegistry.cs) и [реализация резолверов для комманд и запросов](source/alexmore.Fx.Tests/Domain/Infrastructure/Resolvers.cs);
 - А здесь [кишочки](source/alexmore.Fx/Domain).
 
#### А на практике?
  
 - Подобное решение на практике пережило замену БД. Если бы это было на поздней стадии побочным эффектом была бы поддержка сразу двух БД, с переключением в настройках;
 - Обеспечена горизонтальная масштабируемость одной из подсистем: изменения затронули только классы разрешения команд и запросов. 
